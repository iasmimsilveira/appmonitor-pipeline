name: Diagnóstico Automatizado

on:
  workflow_dispatch:

jobs:
  diagnostic:
    runs-on: ubuntu-latest
    steps:
      - name: Verificar APP_ENV
        if: ${{ env.APP_ENV == '' }}
        run: echo "::error::APP_ENV não está definido!"

      - name: Verificar API_KEY
        if: ${{ secrets.API_KEY == '' }}
        run: echo "::error::API_KEY não está definido!"

      - name: Registrar sugestões no summary
        run: |
          echo "## 🛠️ Diagnóstico do Pipeline" >> $GITHUB_STEP_SUMMARY
          echo "- Verifique se APP_ENV está configurado nas variáveis de ambiente." >> $GITHUB_STEP_SUMMARY
          echo "- Confirme se o segredo API_KEY foi definido no repositório." >> $GITHUB_STEP_SUMMARY
